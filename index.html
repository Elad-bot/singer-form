<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Singer Intake Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* (paste your full CSS hereâ€”same as your best-looking version) */
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Inter',sans-serif;background:#f5f7fa;color:#333;display:flex;justify-content:center;padding:20px;}
    .container{background:#fff;border-radius:12px;max-width:600px;width:100%;box-shadow:0 16px 32px rgba(0,0,0,0.12);overflow:hidden;}
    .image-top{height:220px;overflow:hidden;position:relative;}
    .image-top img{width:100%;height:100%;object-fit:cover;filter:brightness(0.85);}
    .image-top::after{content:"";position:absolute;bottom:0;left:0;width:100%;height:70px;background:linear-gradient(to bottom,rgba(255,255,255,0),#fff);}
    h1{margin:25px 30px 0;font-weight:600;font-size:2.1rem;color:#0a376e;}
    form{padding:20px 30px;}
    label{display:block;margin-top:1.25rem;font-weight:600;color:#555;}
    input,select,textarea{width:100%;margin-top:0.4rem;padding:0.7rem 1rem;border:1.8px solid #ddd;border-radius:8px;font-size:1rem;font-family:'Inter',sans-serif;box-shadow:inset 0 2px 5px rgba(0,0,0,0.04);background:#fff;}
    textarea{min-height:90px;}
    .checkbox-group{margin-top:0.4rem;padding:10px;border:1.8px solid #ddd;border-radius:8px;background:#fafafa;}
    .checkbox-group label{display:flex;align-items:center;margin-bottom:6px;font-weight:500;}
    .checkbox-group input{margin-right:10px;}
    .separator{border-top:1px solid #ccc;margin:10px 0;}
    .error{color:#d93025;margin-top:10px;font-weight:600;}
    button{margin-top:1.5rem;width:100%;padding:1rem;font-size:1.1rem;font-weight:700;color:#fff;background:linear-gradient(90deg,#0a376e,#184d9f);border:none;border-radius:12px;cursor:pointer;box-shadow:0 8px 20px rgba(10,55,110,0.6);}
    button:hover{background:linear-gradient(90deg,#184d9f,#0a376e);}
  </style>
</head>
<body>
  <div class="container">
    <div class="image-top">
      <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=800&q=80" alt="" />
    </div>
    <h1>Singer Intake Form</h1>
    <form id="singerForm">
      <!-- your fields with placeholders -->
      <label>Full Name *</label>
      <input name="fullName" required placeholder="John Smith">

      <label>Stage Name / Artist Name</label>
      <input name="stageName" placeholder="DJ Sunshine">

      <label>Email Address *</label>
      <input name="email" required placeholder="you@example.com">

      <label>Phone Number</label>
      <input name="phone" placeholder="+1 234 567 890">

      <label>Genre *</label>
      <select name="genre" required>
        <option value="">-- Select Genre --</option>
        <option>Pop</option><option>Rock</option><option>Hip-Hop</option>
        <option>Jazz</option><option>Electronic</option><option>Country</option>
        <option>R&amp;B</option><option>Folk</option><option>Singer-Songwriter</option><option>Other</option>
      </select>

      <label>Country / Location</label>
      <input name="location" placeholder="New York, USA">

      <label>Link to Music (Spotify, etc.) *</label>
      <input name="musicLink" required placeholder="example.com/yourmusic">

      <label>Upload MP3 *</label>
      <input name="mp3File" type="file" accept=".mp3">

      <label>Describe the MP3 Single *</label>
      <textarea name="mp3Description" required placeholder="About your single..."></textarea>

      <label>EPK or Website Link</label>
      <input name="epkLink" placeholder="yourwebsite.com">

      <label>Linktr.ee or Similar</label>
      <input name="socialLink" placeholder="linktr.ee/yourname">

      <label>Where do you want your song played? *</label>
      <div class="checkbox-group">
        <label><input name="regions" type="checkbox" value="Israel">Israel</label>
        <div class="separator"></div>
        <label><input name="regions" type="checkbox" value="Africa">Africa</label>
        <label><input name="regions" type="checkbox" value="Asia">Asia</label>
        <label><input name="regions" type="checkbox" value="Europe">Europe</label>
        <label><input name="regions" type="checkbox" value="North America">North America</label>
        <label><input name="regions" type="checkbox" value="South America">South America</label>
        <label><input name="regions" type="checkbox" value="Australia / Oceania">Australia / Oceania</label>
      </div>

      <label>Short Bio *</label>
      <textarea name="bio" required placeholder="Tell us who you are..."></textarea>

      <div class="error" id="error"></div>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxNLNEgo_ZBV039yVMZB5bpNNXozoO5pVUuySaJMmjv-b3t3WdP8dJwX7xO1jyYEVyx8Q/exec';
    const form = document.getElementById('singerForm');
    const errorDiv = document.getElementById('error');

    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
    }

    form.addEventListener('submit', async e => {
      e.preventDefault();
      errorDiv.textContent = '';

      // Basic validation
      const data = {};
      const fd = new FormData(form);
      for (let [key, val] of fd.entries()) {
        if (key === 'regions') {
          data.regions = data.regions||[];
          data.regions.push(val);
        } else {
          data[key] = val;
        }
      }
      // Validate email
      if (!data.email || !validateEmail(data.email)) {
        errorDiv.textContent = 'Please enter a valid email.';
        return;
      }
      // Validate musicLink & auto-prefix if needed
      if (!data.musicLink.trim()) {
        errorDiv.textContent = 'Music link is required.';
        return;
      }
      if (!/^https?:\/\//.test(data.musicLink)) {
        data.musicLink = 'https://' + data.musicLink;
      }

      // Convert MP3 to Base64
      const file = form.mp3File.files[0];
      if (!file) {
        errorDiv.textContent = 'Please upload an MP3.';
        return;
      }
      if (file.size > 10*1024*1024) {
        errorDiv.textContent = 'MP3 must be under 10MB.';
        return;
      }
      const base64 = await new Promise(r => {
        const rd = new FileReader();
        rd.onload = ()=> r(rd.result.split(',')[1]);
        rd.readAsDataURL(file);
      });

      // Build payload
      data.mp3Base64 = base64;
      data.mp3FileName = file.name;

      // Send to Apps Script
      try {
        await fetch(SCRIPT_URL, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        window.location.href = 'thankyou.html';
      } catch (err) {
        errorDiv.textContent = 'Submission failed. Try again.';
      }
    });
  </script>
</body>
</html>
